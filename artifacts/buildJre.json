[
  { "label": "Make build dir", "cmd": ["mkdir", "-f", "build"] },

  { "label": "Verify that source sqltool.jar is modular",
    "cmd": [ "java", "-p", "${HSQLDB_ROOT}/lib/sqltool.jar", "-m",
           "org.hsqldb.sqltool/org.hsqldb.cmdline.SqlTool", "--sql",
           "\p helo"]
  }, {
    "label": "Verify that source hsqldbmin.jar is module",
    "cmd": ["java", "-p", "${HSQLDB_ROOT}/lib/hsqldbmin.jar", "-m",
           "org.hsqldb/org.hsqldb.lib.tar.TarReaderMain"]
  }, {
    "label": "Verify that source sqltool.jar has working modulear entry-point",
    "cmd": ["java", "-p", "build/sqltool.jar:build/hsqldbmin.jar", "-m",
           "org.hsqldb.sqltool", "--sql", "call 'helo';", " mem"]
  },

  {
    "label": "Build Modular JRE",
    "cmd": ["jlink", "-p",
      "${SRC_JRE_HOME}/jmods:${HSQLDB_ROOT}/lib/sqltool.jar:${HSQLDB_ROOT}/lib/hsqldbmin.jar",
      "--compress", "2", "--strip-debug", "--no-header-files",
      "--no-man-pages", "--add-modules", " org.hsqldb,org.hsqldb.sqltool",
      "--output", "build/${TARGET_JRE_NAME}"]
  }, {
    "label": "Test Modular JRE",
    "cmd": ["build/${TARGET_JRE_NAME}/bin/java", "-m", "org.hsqldb.sqltool",
           "--sql", "call 'helo';", "mem"]
  }
}
